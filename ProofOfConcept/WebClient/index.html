<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=320, initial-scale=1" />
    <title>jsmpeg streaming</title>
    <style type="text/css">
        body {
            background: #333;
            text-align: center;
            margin-top: 10%;
        }
        #toggleButton {
            display: block;
            margin: auto;
        }
    </style>
</head>
<body>
    <canvas id="videoCanvas" width="300" height="300">
        <p>
            Please use a browser that supports the Canvas Element, like
            <a href="http://www.google.com/chrome">Chrome</a>,
            <a href="http://www.mozilla.com/firefox/">Firefox</a>,
            <a href="http://www.apple.com/safari/">Safari</a> or Internet Explorer 10
        </p>
    </canvas>
    <button id="toggleButton"></button>
    <script type="text/javascript" src="js/jsmpg.js"></script>
    <script type="text/javascript">
        // Show loading notice
        var canvas = document.getElementById('videoCanvas');
        var ctx = canvas.getContext('2d');
        ctx.fillStyle = '#444';
        ctx.fillText('Loading...', canvas.width / 2 - 30, canvas.height / 3);

        var client;
        var player;

        var button = document.getElementById('toggleButton');
        button.textContent = 'Start';
        button.onclick = function() {
            if (this.textContent === 'Start') {
                // Setup the WebSocket connection and start the player
                client = new WebSocket('ws://172.16.1.63:9002');
                player = new jsmpeg(client, { canvas: canvas });
                this.textContent = 'Stop';
            } else {
                client.close();
                this.textContent = 'Start';
            }
        };
    </script>
</body>
</html>
